# Architecture: n-bit circuits; processing unit
_COSC 208, Introduction to Computer Systems, 2023-03-08_

## Announcements
* DEI assignment 2 due Thursday @ 11pm
* Project 3 due Thursday, March 23

## Outline
* Warm-up
* n-bit circuits
* Multiplexer circuit
* Arithmetic Logic Unit (ALU)
* Processing unit

## Warm-up

Q1: _Create a 1-bit circuit for `A <= B` using `AND`, `OR`, `NOT` gates_

| A | B | A <= B |
| - | - | ------ |
| 0 | 0 |   1    |
| 0 | 1 |   1    |
| 1 | 0 |   0    |
| 1 | 1 |   1    |

```
((NOT A) AND (NOT B)) OR
((NOT A) AND B) OR
(A AND B)
```

## n-bit Circuits

* Q2: _Complete the truth-table for `A > B` when A and B are two bits_

| A1 A2 | B1 B2 | A > B |
| ----- | ----- | ----- |
| 0   0 | 0   0 |   0   |
| 0   1 | 0   0 |   1   |
| 1   0 | 0   0 |   1   |
| 1   1 | 0   0 |   1   |
| 0   0 | 0   1 |   0   |
| 0   1 | 0   1 |   0   |
| 1   0 | 0   1 |   1   |
| 1   1 | 0   1 |   1   |
| 0   0 | 1   0 |   0   |
| 0   1 | 1   0 |   0   |
| 1   0 | 1   0 |   0   |
| 1   1 | 1   0 |   1   |
| 0   0 | 1   1 |   0   |
| 0   1 | 1   1 |   0   |
| 1   0 | 1   1 |   0   |
| 1   1 | 1   1 |   0   |

* _How did you determine this?_
    * Convert to decimal — not an option for hardware
    * Compare 1st bits, then, if necessary, compare 2nd bits — `(A1 > B1) OR ((A1 == B1) AND (A2 > B2))`
* _What if there were 3 bits?_ — compare 1st bits, then, if necessary, 2nd bits, then, if necessary, 3rd bits; `(A1 > B1) OR ((A1 == B1) AND (A2 > B2)) OR ((A1 == B1) AND (A2 == B2) AND (A3 > B3))`
* _What do you need to know about previous bits?_
    * Is some previous bit greater?
    * Are all previous bits equal?
* N-bit greater-than circuit
    * Inputs
        * `An`
        * `Bn`
        * `GtIn`
        * `EqIn`
    * Outputs — _What are the formulas for these?_
        * `GtOut`: `GtIn OR (EqIn AND (An > Bn))`
        * `EqOut`: `EqIn AND (An == Bn)`

    ![](../images/circuits/a_gt_b_n-bit.png)
* Ripple adder

## Multiplexer circuit

* Semantics
    ```
    select == 1 ==> output A's value
    select == 0 ==> output B's value
    ```
* Truth-table

| `select` | `A` | `B` | `out` |
|----------|-----|-----|-------|
|     0    |  0  |  0  |   0   |
|     0    |  0  |  1  |   1   |
|     0    |  1  |  0  |   0   |
|     0    |  1  |  1  |   1   |
|     1    |  0  |  0  |   0   |
|     1    |  0  |  1  |   0   |
|     1    |  1  |  0  |   1   |
|     1    |  1  |  1  |   1   |

* Logical formula
    ```
    (NOT(select) AND NOT(A) AND (B)) OR
    (NOT(select) AND (A) AND NOT(B)) OR
    (select AND NOT(A) AND (B)) OR
    (select AND (A) AND NOT(B)) OR
    ```
* Simplified logical formula
    ```
    (NOT(select) AND (B)) OR (select AND (A))
    ```
* Circuit
    ![](https://diveintosystems.org/book/C5-Arch/_images/1bitmux.png)
    
* Given n selection bits, mux select between 2^n different inputs

## Arithmetic Logic Unit (ALU)
![](https://diveintosystems.org/book/C5-Arch/_images/alu.png)

## Processing Unit
![](https://diveintosystems.org/book/C5-Arch/_images/cpu.png)


```c

```
