# Multiprocessing: limited direct execution; system calls
_COSC 208, Introduction to Computer Systems, 2024-04-05_

## Announcements
* Project 2 revisions due Wednesday at 11pm
* Quiz 5 rescheduled for Friday, April 19
* Office hours
    * Monday – canceled
    * Tuesday – 8:15am-10am and 12:45pm-1:15pm

## Outline
* Operating Systems (OS)
* Accessing hardware
* Limited Direct Execution (LDE)
* System calls (syscalls)

## No warm-up: Happy Friday!

<div style="page-break-after:always;"></div>

## System calls (syscalls)

* Example program


```c
#include <stdio.h>
#include <unistd.h>
int name() {
    int pid = getpid();
    return pid;
}
int main() {
    int p = name();
    printf("I am a process. My name is %d.\n", p);
}
```

    I am a process. My name is 1276.


* Assembly code

```
00000000004006ac <name>:
    4006ac:    d10083ff     sub    sp, sp, #0x20
    4006b0:    f9000bfe     str    x30, [sp, #16]
    4006b4:    94007713     bl    41e300 <__getpid>
    4006b8:    b9000fe0     str    w0, [sp, #12]
    4006bc:    b9400fe0     ldr    w0, [sp, #12]
    4006c0:    f9400bfe     ldr    x30, [sp, #16]
    4006c4:    910083ff     add    sp, sp, #0x20
    4006c8:    d65f03c0     ret
000000000041e300 <__getpid>:
    41e300:    d28015c8     mov    x8, #0xac
    41e304:    d4000001     svc    #0x0
    41e308:    d65f03c0     ret
```
